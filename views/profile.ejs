<%include ./Partials/header.ejs%>
<div class="profile-wrapper">
    <div class="profile-header">
        <form id="profileImageUpload" hidden action="/edit-profile" method="post" enctype="multipart/form-data">
            <input type="file" name="uploadProfile">
        </form>
   <div class="relative">
    <div class=" w-[100px] h-[100px] rounded-full overflow-hidden">
        <% if(user.profileImage === " "){%>
            <img
        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJQAAACUCAMAAABC4vDmAAAAY1BMVEXm7P9ClP/////p7v/s8P/7/P87kf8yjv/u8v/3+f/09/8sjP/w9P/i6v9Jl/9boP9/sf9tqP+1z//X4/+gw/+ty/9ko/9VnP/d5/9xq/++1P/R4P+Vvf/M3f96rv/E2f+Jtv9mYAfrAAAHo0lEQVR4nM2c67aqOgyFwZaC3LwhIhfh/Z/yFFwqQgszBTx7/tljj7HEzzRN0ybF2v2Dsv5vAJUWQzn7/d4Pw9CTkv/48r/O/wnl+CFnzBqJMR76S8gMoZy9z61ozPNRZHHf1GZGUL6nsI9KzPN/AuXsOQb0EqePJBHKCUEbfdkrJGKRoPZ80o30ivh+IyjfwEg9cxG8C4ZahtRhwdYCoRyid6uFDiIE5YRrILXyIJdHoPy1kFohrjUP5ZhOObUiPm+sWahVzfTUrLHmoLz1maRnLYLaL44Das1Eh0mo/TZIrSappqBWCwQqhWZQ4aqzbqhogkoPtUoMnxKnQxGmnUx/2/S8TdSV6bFO2kmog4KfzbhV5MkxvcXxLT0meWFx/LM0KNROLCzKU+y64k+uG5/KC5ot62ylhgL9iUfnQ+AK+0vCDQ7nCH0CDoXFAsbP6ZDoxZWewUFUzkEVFBYLeHUKlEgdVnCqIGMpI4MCCovj3jXWInVY8RUbQkVsH0NBTCw6ulNIrYKjBQ3hmGoMhTyIRY9ZJtt2HxH0sHkoJBiwKAWYJFUKUY0CwxAKy+kQOz1tBT1umPUNoBzkGd68P72pjlAYdiahkAnDzzCTpDpDj5yC8oEIxYoYZ7LtuADcKvL1UNDghafJ+DSUOEHrg6OFQsaf1wGFSYarGhlATwcFhc0oJRmqNRW0au01UMgvYjmRSVLlSLDiaijIUESPepoK8ipfCYWtL0SPahVA48dUUFAs5wkhRr3kJlC+4CugsKTsQR49OX7YYsPGUFgWdbnRmWz7doEevh9BQRZmtYGhpKlqaBj4EMrBUuCrgUtJp8KS0MgZQGF7Bc/Ez1tPx7Zs4TeUg7m5dzQbPiyBsZjzBQUe+oR3M6g7eICz/4IC944G8byDwmL629X/oLDPbA5l9aHQ01bT4XugUH4PCj3PMHX0Bv6CDxQ49wyXPnjxs17zzyLMPfkZyp6hB3WGj6z2byj4AJ9VJky2XcFQ/hsKP97MDiZMhwz+Av6Ggj9iMRNPF0fCQegLCluMnz/ExKmwDelT3aJsUVxKiplAUYop/h8UpbJgEKnQ5fip8A+KcoxvMv/wuWc9Pd2Cs/MXFdVUJDd/ZuoWIZ4/P3ShbtsvtOc7HRSxgOaVtAOOkljH3JtAyQBKoBKEwLkEilWUQzPkeEoBRS5dE7YP6JahJ7+DohdA4QwGz1k+Cg2hLNZgR9aNQWHcGEraCnB2YWCnF5RR64HcK89gCXBfPJRnDmV5l+mqg0gLwwcvgLJYVOqNJYISqoCsDSU/njW20lqu3VzMn2rs6E8xVpS2K77sJYRrlwWl6D6Q+ex7Y3k8L9PYfStOy5zDhe1toKQ4i4r6XDZS5bkuIrawyyI0W2ZGYm27hBRnC4btJd9oQd5YZlnCxvqHoWjp8Nb6S4dpG4etxQy2WJuLG2xGdWKdVnhQaLBtH7G07Vwsyi6dsoi1rV1L6Hz6AUefR4byrMiT5nSLpbqFT/57OzVJXkg6vLerr/cBB+Eo6A0UWpXEid1gsB53K3LgSrRrZYUGYAaHZk+i6HK9x21j2USOJxU/rpeIyPU5NKM4Ffeq5CT0nVPfqZ59SiqP8ps/x4v4QSzLknTSQgqLpUmGe/7nIBaM6cyrjvHcfkFlr7ipwBSrd2SNdUlEuaYFD+By0xzqHewd7gNOxTxdVyCIJU45YK1+GWQuKDArP2C+PWWtQz7bD0corXmXO8W59dZ6ZNOO8l1am5p/PGuWWumNFZTZ1O//LkJOzD+vPhgVZNRyD7V+/R+Ua7WZAs+OBo0kExJBo52Hg8K2blH2KqxPkSI31TTLjloAlK7O2HUtb+pLBFdliH83dk21lTCj8hAi96iiGreVjDN1Xqzp4d8K0stoaBQNOKOozqvpjuVlEnExpFK1Kg1M5Z23I+qo7Pw7kCqbur69yqiwR8TKv2ylbn/rT0DDThsi1bVnK02jYK/31LAliap+ydTRQL3DuvcbJmmr88tWX7cKVG26nN7LaUz1apfVt+k+G5plLPgVk9wpdkvOVENz5+ss2zI+DSXi9mh7svW7HcDIrB3JmOo+HDzFdQKOt+WvI7fhM9cJdrt83fQJUJAPGUZQDqUYu4bEYXRxZnxvJvs1VDZCUFx7opSIl8utxgSqC2LJD90qSBQAyqt0v1iNn3JVTJpLh/cf2cq9K79eDeVghevFTEf15XvNnVFn/Z2VginVvBBAd7vW2T6w6+w0cQ/ZuW9M5d61L06YuEa+bWQISv03T1243zIyqGMBALWr1jiVUkkIRRwHoXaXbfbI7uEy+bUzr7twmg0cSz/tMCiZX609hEKM8icy1I49VjVW8Jj/SuBlM04er+ZZbnwG3oEDvZaHr3QSK4JG/zoJKpRMR0/LXUuI0/Sko0LtdnW6zFoiSGv0u2ConVOn5tYSIq3xd4jhUFL1MTC74xAcCUhEKBkfypsgcglxK4nfQvzz3S6sj2BdtCMKxKOeetnNOlC71ruag5ivs8k/OTSkYVsCJeUX17sIxqX214i5QSDu14Jso0VQnXidPNJbLIJP91sLE9/SR5JDUXIDqFY+y4r6nCTP9rfkeq6LjPJKvE2gNtE/CfUfAsGCEZSTsN0AAAAASUVORK5CYII="
      class="w-[100%] h-[100%] object-cover"
        class="avatar"
      />
        <%}%>
        <img
        src="/images/uploads/<%=user.profileImage%>"
      class="w-[100%] h-[100%] object-cover"
        class="avatar"
      />
      <span id="editProfileImage" class="absolute right-0 bottom-0 bg-zinc-200 cursor-pointer rounded-full p-1 h-[25px] w-[25px] flex justify-center items-center"><i class="ri-pen-nib-line"></i></span>
       </div>
   </div>
      <div class="profile-info">
        <h1 class="display-name"><%=user.fullname%></h1>
        <p>@<%=user.username%></p>
      </div>
      <div class="profile-stats">
        <div class="profile-stat">
          <strong id="followingCount">243</strong>
          <span>Following</span>
        </div>
        <div class="profile-stat">
          <strong id="followerCount">56.7K</strong>
          <span>Followers</span>
        </div>
        <div class="profile-stat">
          <strong id="likeCount">4.22M</strong>
          <span>Likes</span>
        </div>
      </div>
      <div class="profile-controls">
        <div class="stacked-button">
          <button class="follow" id="following">
            <a href="/post" class="follow-text">Create Post</a>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="grid">
    <% user?.posts?.forEach(function(post){ %>
        <div class="grid-item" style="width: 18rem">
            <img
              src="/images/uploads/<%=post.postImage%>"
              class="card-img-top"
              alt="..."
            />
            <div class="card-body">
              <p class="card-text">
                <%=post.title%>
              </p>
            </div>
          </div>
    <%})%>
   
  </div>
  <script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
  crossorigin="anonymous"
></script>
  <script>
    document.querySelector("#editProfileImage").addEventListener('click', function(){
        document.querySelector("#profileImageUpload input").click();
    });
    document.querySelector('#profileImageUpload input').addEventListener('change', function(){
        document.querySelector('#profileImageUpload').submit();
    });

    $(".grid").imagesLoaded(function() {
          $(".grid").masonry({
            itemSelector: ".grid-item"
          });
        });
  </script>
<%include ./Partials/footer.ejs%>